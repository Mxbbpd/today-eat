<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?</title>
  <style>
    body {
      background-color: #0c1b33;
      color: #ffffff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    h1 {
      color: #4fc3f7;
      margin-bottom: 1rem;
      font-size: 2rem;
      text-shadow: 1px 1px 5px rgba(0,0,0,0.5);
    }
    input, select, button {
      margin: 0.5rem;
      padding: 0.6rem 1rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
      transition: 0.3s;
    }
    input, select {
      width: 250px;
    }
    button {
      background-color: #00bcd4;
      color: #ffffff;
      font-weight: bold;
      cursor: pointer;
    }
    button:hover {
      background-color: #0097a7;
      transform: scale(1.05);
    }
    .hidden { display: none; }
    .ingredient-inputs .suggestion-box {
      position: relative;
      margin-bottom: 1rem;
    }
    .suggestions {
      position: absolute;
      background: #37474f;
      width: 100%;
      border-radius: 0 0 5px 5px;
      z-index: 1;
      max-height: 150px;
      overflow-y: auto;
    }
    .suggestions div {
      padding: 0.4rem;
      cursor: pointer;
    }
    .suggestions div:hover {
      background: #455a64;
    }
    .random-box {
      background: rgba(255, 255, 255, 0.1);
      margin-top: 1.5rem;
      padding: 1.2rem;
      color: #ffeb3b;
      border-radius: 12px;
      box-shadow: 0 0 10px #4fc3f7;
      min-width: 280px;
      max-width: 400px;
      text-align: center;
      animation: shake 0.5s;
    }
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-3px); }
      75% { transform: translateX(3px); }
    }
    #recipe-category {
      margin-top: 0.5rem;
      font-size: 0.9rem;
      color: #81d4fa;
    }
  </style>
</head>
<body>
  <h1>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?</h1>
  <label for="method">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</label>
  <select id="method">
    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
    <option value="cook">‡∏ó‡∏≥‡∏Å‡∏¥‡∏ô‡πÄ‡∏≠‡∏á</option>
    <option value="buy">‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏¥‡∏ô</option>
    <option value="random">Random</option>
  </select>
  <div id="ingredient-section" class="hidden">
    <p>‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ:</p>
    <div class="ingredient-inputs" id="ingredient-inputs"></div>
    <button onclick="addIngredientInput()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</button>
  </div>
  <div id="foodtype-section" class="hidden">
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</p>
    <select id="food-type">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£ --</option>
      <option value="thai">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢</option>
      <option value="japanese">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</option>
      <option value="fastfood">‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î</option>
    </select>
  </div>
  <div style="display:flex; gap: 1rem; align-items: center;">
    <button onclick="findFood()">üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£!</button>
    <button onclick="resetIngredients()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
  </div>
  <div id="result" class="random-box hidden">
    <div id="recipe-text"></div>
    <div id="recipe-category"></div>
  </div>
  <audio id="level-up-sound" src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_c778ec3d62.mp3?filename=level-up-191997.mp3" preload="auto"></audio>
<script>
  const methodSelect = document.getElementById('method');
  const ingredientSection = document.getElementById('ingredient-section');
  const foodtypeSection = document.getElementById('foodtype-section');
  const resultBox = document.getElementById('result');
  const ingredientInputs = document.getElementById('ingredient-inputs');

  const recipeDatabase = [
    { name: '‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', ingredients: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏ã‡∏≠‡∏™‡∏´‡∏≠‡∏¢‡∏ô‡∏≤‡∏á‡∏£‡∏°'], category: '‡∏ú‡∏±‡∏î' },
    { name: '‡πÅ‡∏Å‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡πÉ‡∏™‡πà‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠', ingredients: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á‡πÅ‡∏î‡∏á', '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠'], category: '‡πÅ‡∏Å‡∏á' },
    { name: '‡∏¢‡∏≥‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', ingredients: ['‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏û‡∏£‡∏¥‡∏Å', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', '‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á'], category: '‡∏¢‡∏≥' },
    { name: '‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏Ç‡∏¥‡∏á', ingredients: ['‡πÑ‡∏Å‡πà', '‡∏Ç‡∏¥‡∏á', '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°'], category: '‡∏ú‡∏±‡∏î' },
    { name: '‡∏ï‡πâ‡∏°‡πÅ‡∏ã‡πà‡∏ö‡πÑ‡∏Å‡πà', ingredients: ['‡πÑ‡∏Å‡πà', '‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', '‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î', '‡∏û‡∏£‡∏¥‡∏Å'], category: '‡∏ï‡πâ‡∏°' },
    { name: '‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà‡∏ó‡∏≠‡∏î‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', ingredients: ['‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤'], category: '‡∏ó‡∏≠‡∏î' },
    { name: '‡πÑ‡∏Å‡πà‡∏¢‡πà‡∏≤‡∏á‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', ingredients: ['‡πÑ‡∏Å‡πà', '‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', '‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏Ç‡∏≤‡∏ß'], category: '‡∏¢‡πà‡∏≤‡∏á' },
    { name: '‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà‡∏ã‡∏≠‡∏™‡∏°‡∏∞‡∏Ç‡∏≤‡∏°', ingredients: ['‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å', '‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏õ‡∏µ‡πä‡∏ö'], category: '‡∏ó‡∏≠‡∏î' },
    { name: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏ú‡∏±‡∏î‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢', ingredients: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢', '‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤'], category: '‡∏ú‡∏±‡∏î' },
    { name: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', ingredients: ['‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏ã‡∏≠‡∏™‡πÄ‡∏ó‡∏≠‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥'], category: '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß' }
  ];

  function addIngredientInput(value = '') {
    const wrapper = document.createElement('div');
    wrapper.className = 'suggestion-box';
    const input = document.createElement('input');
    input.type = 'text';
    input.placeholder = '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö';
    input.value = value;
    input.oninput = () => suggestIngredients(input);
    const suggBox = document.createElement('div');
    suggBox.className = 'suggestions';
    wrapper.appendChild(input);
    const deleteBtn = document.createElement('button');
    deleteBtn.textContent = '‚ùå';
    deleteBtn.style.marginLeft = '0.5rem';
    deleteBtn.onclick = () => wrapper.remove();
    wrapper.appendChild(deleteBtn);
    wrapper.appendChild(suggBox);
    ingredientInputs.appendChild(wrapper);
  }

  function suggestIngredients(input) {
    const wrapper = input.parentElement;
    const suggBox = wrapper.querySelector('.suggestions');
    const value = input.value.toLowerCase();
    suggBox.innerHTML = '';
    if (!value) return;
    const matches = ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡πÑ‡∏Å‡πà', '‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏Ç‡∏¥‡∏á', '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°', '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', '‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á', '‡∏û‡∏£‡∏¥‡∏Å', '‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤', '‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', '‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î', '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢', '‡∏Ñ‡∏∞‡∏ô‡πâ‡∏≤', '‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏Ç‡∏≤‡∏ß', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏Ç‡∏≤‡∏°‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å', '‡∏ô‡πâ‡∏≥‡∏ï‡∏≤‡∏•‡∏õ‡∏µ‡πä‡∏ö', '‡∏ã‡∏≠‡∏™‡πÄ‡∏ó‡∏≠‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥', '‡∏Ç‡πâ‡∏≤‡∏ß', '‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á‡πÅ‡∏î‡∏á'].filter(item => item.toLowerCase().includes(value));
    matches.forEach(match => {
      const div = document.createElement('div');
      div.textContent = match;
      div.onclick = () => { input.value = match; suggBox.innerHTML = ''; };
      suggBox.appendChild(div);
    });
  }

  methodSelect.onchange = () => {
  const method = methodSelect.value;
  ingredientSection.classList.toggle('hidden', method !== 'cook');
  foodtypeSection.classList.toggle('hidden', method !== 'buy');

  if (method === 'cook' && ingredientInputs.children.length === 0) {
    addIngredientInput();
  }
};

  function findFood() {
  resultBox.classList.add('hidden');
  document.getElementById('recipe-text').innerHTML = `<strong>üîÑ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∏‡πà‡∏°...</strong>`;
  resultBox.classList.remove('hidden');

  setTimeout(() => {

    setTimeout(() => {
    const method = methodSelect.value;
    const ingredients = Array.from(document.querySelectorAll('#ingredient-inputs input'))
      .map(i => i.value.trim()).filter(Boolean);
    localStorage.setItem('ingredients', JSON.stringify(ingredients));

    let selected = null;
    let choice = '';

    if (method === 'cook') {
      const scoredRecipes = recipeDatabase.map(r => {
  const matchedIngredients = r.ingredients.filter(i => ingredients.some(input => i.includes(input) || input.includes(i)));
  const totalMatches = matchedIngredients.length;
  const bonus = matchedIngredients.some(i => ingredients.includes(i)) ? 0.1 : 0;
  const score = (totalMatches / r.ingredients.length) + bonus;
  return { ...r, score };
}).filter(r => r.score >= 0.2);

      if (scoredRecipes.length > 0) {
        const bestMatches = scoredRecipes.filter(r => r.score === Math.max(...scoredRecipes.map(m => m.score)));
        selected = bestMatches[Math.floor(Math.random() * bestMatches.length)];
        const percent = Math.round(selected.score * 100);
        choice = `‡∏ó‡∏≥‡πÄ‡∏°‡∏ô‡∏π: ${selected.name} (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ${percent}%)`;
      } else {
        choice = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ô‡∏µ‡πâ ‡∏•‡∏≠‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏î‡∏π‡∏ô‡∏∞';
      }
    } else if (method === 'random') {
      selected = recipeDatabase[Math.floor(Math.random() * recipeDatabase.length)];
      choice = `‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏∏‡πà‡∏°: ${selected.name}`;
    } else if (method === 'buy') {
  const foodType = document.getElementById('food-type').value;
  const typeMap = {
    thai: recipeDatabase.filter(r => r.category === '‡πÅ‡∏Å‡∏á' || r.category === '‡∏ï‡πâ‡∏°' || r.category === '‡∏ú‡∏±‡∏î'),
    japanese: recipeDatabase.filter(r => r.name.includes('‡πÄ‡∏ó‡∏≠‡∏£‡∏¥‡∏¢‡∏≤‡∏Å‡∏¥') || r.name.includes('‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤')),
    fastfood: recipeDatabase.filter(r => r.category === '‡∏ó‡∏≠‡∏î' || r.category === '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏à‡∏≤‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß')
  };
  const typeRecipes = typeMap[foodType] || [];
  if (typeRecipes.length > 0) {
    selected = typeRecipes[Math.floor(Math.random() * typeRecipes.length)];
    choice = `‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ${foodType === 'thai' ? '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢' : foodType === 'japanese' ? '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô' : '‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î'}: ${selected.name}`;
  } else {
    choice = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô';
  }
} else {
  choice = '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏´‡∏≤‡∏Å‡πà‡∏≠‡∏ô';
}

    document.getElementById('recipe-text').innerHTML = `<strong>${choice}</strong>`;
    document.getElementById('recipe-category').innerHTML = selected?.category ? `<p>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ${selected.category}</p>` : '';

// ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°
if (method === 'cook' && selected) {
  const missing = selected.ingredients.filter(i => !ingredients.includes(i));
  if (missing.length > 0) {
    const suggestionText = `‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö: <strong>${missing.join(', ')}</strong>`;
    const suggestionDiv = document.createElement('p');
    suggestionDiv.style.color = '#90ee90';
    suggestionDiv.innerHTML = suggestionText;
    resultBox.appendChild(suggestionDiv);
  }
}
    document.getElementById('level-up-sound').play();
    document.getElementById('level-up-sound').play();
    resultBox.classList.remove('hidden');
  }, 1000);

  window.onload = () => {
    const saved = localStorage.getItem('ingredients');
    if (saved) {
      JSON.parse(saved).forEach(v => addIngredientInput(v));
    } else {
      addIngredientInput();
    }
  }

  function resetIngredients() {
    ingredientInputs.innerHTML = '';
    localStorage.removeItem('ingredients');
    addIngredientInput();
  }
    }
  }
</script>
</body>
</html>
