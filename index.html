<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?</title>
  <style>
    body {
      background-color: #0c1b33;
      color: #ffffff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      padding: 1rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    h1 {
      color: #4fc3f7;
      font-size: 2rem;
      margin-bottom: 1rem;
    }
    input, select, button {
      margin: 0.3rem;
      padding: 0.6rem;
      border-radius: 8px;
      border: none;
      font-size: 1rem;
    }
    button {
      background-color: #00bcd4;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background-color: #0097a7;
    }
    .ingredient-inputs .suggestion-box {
      position: relative;
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
    }
    .suggestions {
      position: absolute;
      background: #37474f;
      width: 100%;
      border-radius: 0 0 5px 5px;
      z-index: 1;
    }
    .suggestions div {
      padding: 0.4rem;
      cursor: pointer;
    }
    .suggestions div:hover {
      background: #455a64;
    }
    .hidden { display: none; }
    .random-box {
      background-color: #1a237e;
      margin-top: 1rem;
      padding: 1rem;
      color: #ffeb3b;
      border-radius: 12px;
      box-shadow: 0 0 10px #4fc3f7;
      text-align: center;
      min-width: 280px;
    }
  </style>
</head>
<body>
  <h1>‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏Å‡∏¥‡∏ô‡∏≠‡∏∞‡πÑ‡∏£‡∏î‡∏µ?</h1>

  <label for="method">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏´‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</label>
  <select id="method">
    <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å --</option>
    <option value="cook">‡∏ó‡∏≥‡∏Å‡∏¥‡∏ô‡πÄ‡∏≠‡∏á</option>
    <option value="buy">‡∏ã‡∏∑‡πâ‡∏≠‡∏Å‡∏¥‡∏ô</option>
    <option value="random">Random</option>
  </select>

  <div id="ingredient-section" class="hidden">
    <p>‡πÉ‡∏™‡πà‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏°‡∏µ:</p>
    <div class="ingredient-inputs" id="ingredient-inputs"></div>
    <button onclick="addIngredientInput()">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö</button>
  </div>

  <div id="foodtype-section" class="hidden">
    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</p>
    <select id="food-type">
      <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£ --</option>
      <option value="thai">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏ó‡∏¢</option>
      <option value="japanese">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô</option>
      <option value="fastfood">‡∏ü‡∏≤‡∏™‡∏ï‡πå‡∏ü‡∏π‡πâ‡∏î</option>
    </select>
  </div>

  <div style="margin-top: 1rem;">
    <button onclick="findFood()">üé≤ ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£!</button>
    <button onclick="resetIngredients()">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</button>
  </div>

  <div id="video-container" class="hidden" style="margin-top: 1rem;">
    <img id="loading-video" src="20250409_1052_Husky Chef Delight_simple_compose_01jrcav1wsejga9796d3a7z5fm.gif"
         width="320" height="240" style="border-radius:12px; box-shadow: 0 0 10px #4fc3f7;" />
  </div>

  <div id="result" class="random-box hidden">
    <div id="recipe-text"></div>
    <div id="recipe-category"></div>
  </div>

  <audio id="level-up-sound" src="https://cdn.pixabay.com/download/audio/2022/03/10/audio_c778ec3d62.mp3?filename=level-up-191997.mp3" preload="auto"></audio>

  <script>
    const methodSelect = document.getElementById('method');
    const ingredientSection = document.getElementById('ingredient-section');
    const foodtypeSection = document.getElementById('foodtype-section');
    const ingredientInputs = document.getElementById('ingredient-inputs');
    const resultBox = document.getElementById('result');
    const videoContainer = document.getElementById('video-container');

    const recipeDatabase = [
      { name: '‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', ingredients: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏ã‡∏≠‡∏™‡∏´‡∏≠‡∏¢‡∏ô‡∏≤‡∏á‡∏£‡∏°'], category: '‡∏ú‡∏±‡∏î' },
      { name: '‡πÅ‡∏Å‡∏á‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß‡πÉ‡∏™‡πà‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠', ingredients: ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡∏û‡∏£‡∏¥‡∏Å‡πÅ‡∏Å‡∏á‡πÅ‡∏î‡∏á', '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠'], category: '‡πÅ‡∏Å‡∏á' },
      { name: '‡∏¢‡∏≥‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', ingredients: ['‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏û‡∏£‡∏¥‡∏Å', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', '‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á'], category: '‡∏¢‡∏≥' },
      { name: '‡πÑ‡∏Å‡πà‡∏ú‡∏±‡∏î‡∏Ç‡∏¥‡∏á', ingredients: ['‡πÑ‡∏Å‡πà', '‡∏Ç‡∏¥‡∏á', '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°'], category: '‡∏ú‡∏±‡∏î' },
      { name: '‡∏ï‡πâ‡∏°‡πÅ‡∏ã‡πà‡∏ö‡πÑ‡∏Å‡πà', ingredients: ['‡πÑ‡∏Å‡πà', '‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', '‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î', '‡∏û‡∏£‡∏¥‡∏Å'], category: '‡∏ï‡πâ‡∏°' }
    ];

    function addIngredientInput(value = '') {
      const wrapper = document.createElement('div');
      wrapper.className = 'suggestion-box';
      const input = document.createElement('input');
      input.type = 'text';
      input.placeholder = '‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö';
      input.value = value;
      input.oninput = () => suggestIngredients(input);
      const suggBox = document.createElement('div');
      suggBox.className = 'suggestions';
      const deleteBtn = document.createElement('button');
      deleteBtn.textContent = '‚ùå';
      deleteBtn.style.marginLeft = '0.5rem';
      deleteBtn.onclick = () => wrapper.remove();
      wrapper.appendChild(input);
      wrapper.appendChild(deleteBtn);
      wrapper.appendChild(suggBox);
      ingredientInputs.appendChild(wrapper);
    }

    function suggestIngredients(input) {
      const wrapper = input.parentElement;
      const suggBox = wrapper.querySelector('.suggestions');
      const value = input.value.toLowerCase();
      suggBox.innerHTML = '';
      const options = ['‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏ß‡∏±‡∏ß', '‡πÑ‡∏Å‡πà', '‡∏õ‡∏•‡∏≤‡∏î‡∏≠‡∏•‡∏•‡∏µ‡πà', '‡∏Å‡∏£‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏°', '‡∏Ç‡∏¥‡∏á', '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°', '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠', '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', '‡∏´‡∏≠‡∏°‡πÅ‡∏î‡∏á', '‡∏û‡∏£‡∏¥‡∏Å'];
      options.filter(i => i.includes(value)).forEach(match => {
        const div = document.createElement('div');
        div.textContent = match;
        div.onclick = () => { input.value = match; suggBox.innerHTML = ''; };
        suggBox.appendChild(div);
      });
    }

    methodSelect.onchange = () => {
      const method = methodSelect.value;
      ingredientSection.classList.toggle('hidden', method !== 'cook');
      foodtypeSection.classList.toggle('hidden', method !== 'buy');
      if (method === 'cook' && ingredientInputs.children.length === 0) {
        addIngredientInput();
      }
    };

    function findFood() {
      resultBox.classList.add('hidden');
      videoContainer.classList.remove('hidden');

      setTimeout(() => {
        const method = methodSelect.value;
        const ingredients = Array.from(document.querySelectorAll('#ingredient-inputs input')).map(i => i.value.trim()).filter(Boolean);
        localStorage.setItem('ingredients', JSON.stringify(ingredients));
        let selected = null;
        let choice = '';

        if (method === 'cook') {
          const scored = recipeDatabase.map(r => {
            const matched = r.ingredients.filter(i => ingredients.some(j => i.includes(j) || j.includes(i)));
            const score = matched.length / r.ingredients.length + (matched.some(i => ingredients.includes(i)) ? 0.1 : 0);
            return { ...r, score };
          }).filter(r => r.score >= 0.2);
          if (scored.length > 0) {
            const best = scored.filter(r => r.score === Math.max(...scored.map(x => x.score)));
            selected = best[Math.floor(Math.random() * best.length)];
            const percent = Math.round(selected.score * 100);
            choice = `‡∏ó‡∏≥‡πÄ‡∏°‡∏ô‡∏π: ${selected.name} (‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ${percent}%)`;
          } else {
            choice = '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÉ‡∏Å‡∏•‡πâ‡πÄ‡∏Ñ‡∏µ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ô‡∏µ‡πâ';
          }
        } else if (method === 'buy') {
          const type = document.getElementById('food-type').value;
          const byType = {
            thai: recipeDatabase.filter(r => r.category === '‡πÅ‡∏Å‡∏á' || r.category === '‡∏ï‡πâ‡∏°' || r.category === '‡∏ú‡∏±‡∏î'),
            japanese: recipeDatabase.filter(r => r.name.includes('‡∏ã‡∏π‡∏ä‡∏¥') || r.name.includes('‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤')),
            fastfood: recipeDatabase.filter(r => r.category === '‡∏ó‡∏≠‡∏î' || r.category === '‡∏à‡∏≤‡∏ô‡∏î‡πà‡∏ß‡∏ô')
          }[type] || [];
          selected = byType[Math.floor(Math.random() * byType.length)];
          choice = selected ? `‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏≤‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó ${type}: ${selected.name}` : '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô';
        } else {
          selected = recipeDatabase[Math.floor(Math.random() * recipeDatabase.length)];
          choice = `‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏∏‡πà‡∏°: ${selected.name}`;
        }

        document.getElementById('recipe-text').innerHTML = `<strong>${choice}</strong>`;
        document.getElementById('recipe-category').innerHTML = selected?.category ? `<p>‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà: ${selected.category}</p>` : '';
        document.getElementById('level-up-sound').play();
        videoContainer.classList.add('hidden');
        resultBox.classList.remove('hidden');
      }, 1000);
    }

    function resetIngredients() {
      ingredientInputs.innerHTML = '';
      localStorage.removeItem('ingredients');
      addIngredientInput();
    }

    window.onload = () => {
      const saved = localStorage.getItem('ingredients');
      if (saved) {
        JSON.parse(saved).forEach(v => addIngredientInput(v));
      } else {
        addIngredientInput();
      }
    };
  </script>
</body>
</html>
